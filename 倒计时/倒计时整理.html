<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>倒计时</title>
</head>

<body>
<div id="online-info-1">00:00:00</div>
<div id="online-info-2">00:00:00</div>
<script type="text/javascript">
	var djs_time={
		id:null,
		timerInterval:null,
		colonTag:null,
		newTimer:function(obj){
			this.init.prototype = djs_time;
			return new this.init(obj);
		},
		//添加0
		addZero:function(num){
			if(num.toString().length===1){
				return "0"+num;
			}else{
				return num;
			}
		},
		//刷新页面，并负值
		fresh : function(){
			var	timeStamp=this.timeStamp--;
			 var __d=parseInt(timeStamp/3600/24);
			 var __h=this.addZero(parseInt((timeStamp/3600)%24)+__d*24);
			 var __m=this.addZero(parseInt((timeStamp/60)%60));
			 var __s=this.addZero(parseInt(timeStamp%60));
			 var htmls='';
			 //__d+"天 "+__h+"小时"+__m+"分"+__s+"秒"
			 if(this.colonTag){
				this.eleWrap.innerHTML=__h+'<'+this.colonTag+'>:</'+this.colonTag+'>'+__m+'<'+this.colonTag+'>:</'+this.colonTag+'>'+__s;
			 }else{
				this.eleWrap.innerHTML=__h+':'+__m+':'+__s; 
			}
			 if(timeStamp<=0){
				 this.eleWrap.innerHTML="00:00:00";
				 clearInterval(this.timerInterval);
				 this.timerInterval=null;
				 console.log(1);
				 this.fn();
			 }
		},
		showInterval : function(){	
			var _this=this;
			this.timerInterval=window.setInterval(function(){_this.fresh();},1000);
		},
		init : function(obj){
			this.eleWrap=document.getElementById(obj.id);
			this.timeStamp=obj.timeStamp;		
			this.colonTag=obj.colonTag;
			this.showInterval();
			this.fn=obj.fn;
		}							
	}
	function sfn(){ " test me" }
	var t_1={id:'online-info-1',timeStamp:23423,fn:sfn,colonTag:'span'}
	djs_time.newTimer(t_1);
	var t_2={id:'online-info-2',timeStamp:10,fn:sfn}
	djs_time.newTimer(t_2);
</script>



</body>
</html>
